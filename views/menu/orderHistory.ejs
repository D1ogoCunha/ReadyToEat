<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Profile</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/stylesheets/profile.css" />

  </head>
  <body>
    <div class="container-xl px-4 mt-4">
      <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css"
        integrity="sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA="
        crossorigin="anonymous"
      />
        <hr class="mt-0 mb-4" />
        <!-- Order history card-->
        <div class="card mb-4">
          <div class="card-header">Order History</div>
          <div class="card-body p-0">
            <div class="table-responsive table-order-history">
              <table class="table mb-0">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Customer</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Dishes</th>
                  </tr>
                </thead>
                <tbody>
                  <% if (orders && orders.length > 0) { %>
                    <% orders.forEach((order, index) => { %>
                      <tr>
                        <td><%= index + 1 %></td> <!-- ID incremental -->
                        <td><%= order.customerId ? `${order.customerId.firstName} ${order.customerId.lastName}` : "Unknown" %></td>
                        <td>$<%= order.amount.toFixed(2) %></td>
                        <td>
                          <% if (order.status === "Pending") { %>
                            <span class="badge bg-warning text-dark">Pending</span>
                          <% } else if (order.status === "Paid") { %>
                            <span class="badge bg-success">Paid</span>
                          <% } else { %>
                            <span class="badge bg-danger">Cancelled</span>
                          <% } %>
                        </td>
                        <td>
                          <% if (order.dishes && order.dishes.length > 0) { %>
                            <ul>
                              <% order.dishes.forEach(dish => { %>
                                <li><%= dish.nome %> - $<%= dish.preco.toFixed(2) %></li>
                              <% }) %>
                            </ul>
                          <% } else { %>
                            No dishes
                          <% } %>
                        </td>
                      </tr>
                    <% }) %>
                  <% } else { %>
                    <tr>
                      <td colspan="5" class="text-center">No orders found.</td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
    </div>

    <div class="d-flex justify-content-end mb-3">
      <a href="/menus/order/phone" class="btn btn-primary">Create Phone Order</a>
    </div>
  </body>

  <footer>
    <p>2025 ReadyToEat. Todos os direitos reservados.</p>
  </footer>
</html>
